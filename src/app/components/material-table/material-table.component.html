<table
  mat-table
  matSort
  cdkDropList
  cdkDropListOrientation="horizontal"
  [dataSource]="dataSource"
  (matSortChange)="sortChangeHandler($event)"
  (cdkDropListDropped)="droppedHandler($event)"
  class="mat-elevation-z8"
>
  <ng-container
    *ngFor="let column of columns; let index"
    [matColumnDef]="column.column"
  >
    <ng-container [ngSwitch]="column.column">
      <ng-container *ngSwitchCase="'cart'">
        <th mat-header-cell cdkDrag cdkDragLockAxis="x" *matHeaderCellDef>
          {{ column.label }}
        </th>
        <td mat-cell *matCellDef="let element">
          <button mat-button color="primary" [id]="'cart-btn-' + index">
            View Cart
          </button>
        </td>
      </ng-container>
      <ng-container *ngSwitchDefault>
        <th
          mat-header-cell
          [mat-sort-header]="column.field"
          cdkDrag
          cdkDragLockAxis="x"
          *matHeaderCellDef
        >
          {{ column.label }}
        </th>
        <td mat-cell *matCellDef="let element">
          {{ getColumnValue(element, column.field) }}
        </td>
      </ng-container>
    </ng-container>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayColumns"></tr>
</table>
